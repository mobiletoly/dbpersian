<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="DBPersian : Database Persistence Annotations for Android">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>DBPersian</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mobiletoly/dbpersian">View on GitHub</a>

          <h1 id="project_title">DBPersian</h1>
          <h2 id="project_tagline">Database Persistence Annotations for Android</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mobiletoly/dbpersian/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mobiletoly/dbpersian/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="dbpersian---database-persistence-annotations-for-android" class="anchor" href="#dbpersian---database-persistence-annotations-for-android" aria-hidden="true"><span class="octicon octicon-link"></span></a>DBPersian - Database Persistence Annotations for Android</h3>

<p>DBPersian is a simple and elegant framework to help you to deal with a routine tasks such as database access. This is a pretty thin layer in between SQLite database and Android application, mostly designed to provide a convenient way to serialize/deserialize entities to/from SQLite database based on Java annotations. The primary goal is to keep developer as close to the database as possible while getting rid of some burden and boilerplate code. Also performance is a key consideration for DBPersian, so no reflections and other relatively slow approaches, everything is done via generating code in compile time, so hopefully your code will be as fast as if you would write it by yourself.</p>

<p>Alright, let's get down to business. The following tutorial assumes that you are using Android Studio with gradle for your development. We are going to write a simple Music Collection application, that will help you to start using DBPersian and will show you a best practices at the same time. We are going to use a step-by-step approach.</p>

<p>You can create a new Android project or just simply take a look at <a href="https://github.com/mobiletoly/dbpersian/tree/master/android/TestApp">demo code</a> repository which we have tried to keep as simple as possible.</p>

<p>At first let's take a look how is gradle file looks like</p>

<pre><code>...
// We need APT plugin to perform compile-time annotations processing
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        // --- DBPersian uses APT (annotation processor)
        // so we have decided to use android-apt plugin
        classpath 'com.neenbedankt.gradle.plugins:android-apt:1.4'
    }
    ...
}

apply plugin: 'com.android.application'
// --- Apply APT plugin
apply plugin: 'com.neenbedankt.android-apt'

android {
    ...
}


dependencies {
    repositories {
        ...
        mavenCentral()
    }

    compile fileTree(dir: 'libs', include: ['*.jar'])

    // --- Add dbpersian dependencies
    compile 'net.dbpersian:api:0.5'
    provided 'net.dbpersian:builder:0.5'
    apt 'net.dbpersian:builder:0.5'
}
</code></pre>

<p>What you want to do next is to create a database helper that allows you to handle things like opening database, upgrading database and most important - DBPersian will generate a code to take care of creating database based on schemas that you specify with annotations.</p>

<p>Let's create a database helper file that takes care of creating/opening a database.</p>

<p>Since we don't have any plugins for Android Studio yet, the next step is a little cumbersome. Let's create a class MusicDbHelper:</p>

<pre><code>import net.dbpersian.annotations.db.Database;
...
@Database(filename = "music.db")
public class MusicDbHelper { }
</code></pre>

<p>and now it is time to rebuild a project (menu Build / Rebuild Project). If everything is OK then AbstractMusicDbHelper class will be generated for you. So this time we want to extend this class</p>

<pre><code>import net.dbpersian.annotations.db.Database;
...
@Database(filename = "music.db")
public class MusicDbHelper extend AbstractMusicDbHelper
{
    ...
}
</code></pre>

<p>Take a look at full implementation of this class: <a href="https://github.com/mobiletoly/dbpersian/blob/master/android/TestApp/app/src/main/java/net/dbpersian/testapp/music/MusicDbHelper.java">here</a>
The most important part so far is a <a href="https://github.com/Database" class="user-mention">@Database</a> annotation. It is very simple to use, just specify a database name via <strong>filename</strong> parameter and DBPersian will take care of generating a code for you to help you out in creating and opening a SQLite database named "music.db".</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">DBPersian maintained by <a href="https://github.com/mobiletoly">mobiletoly</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
